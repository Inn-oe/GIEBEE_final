# Solar Company Management System

## Overview

A comprehensive ERP (Enterprise Resource Planning) system designed for solar, electrical, and related service companies. The system manages multiple aspects of business operations including company profiles, inventory tracking, activity logging, invoicing, and financial records. It supports various company types such as solar installations, electrical appliances, borehole installations, CCTV systems, geyser installations, and alarm systems.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
- **Template Engine**: Jinja2 templating with Flask
- **UI Framework**: Bootstrap 5.1.3 for responsive design
- **Icons**: Font Awesome 6.0.0 for iconography
- **Layout**: Single-page application with sidebar navigation
- **Styling**: Custom CSS with sidebar-based navigation, card-based content display

### Backend Architecture
- **Framework**: Flask web framework with Python
- **Database ORM**: SQLAlchemy with Flask-SQLAlchemy extension
- **Session Management**: Flask's built-in session handling with secret key configuration
- **File Generation**: ReportLab for PDF invoice generation
- **Architecture Pattern**: Model-View-Controller (MVC) with Flask routes as controllers

### Data Storage Solutions
- **Database**: SQLAlchemy ORM with configurable database backend
- **Connection Pooling**: Configured with pool recycling (300 seconds) and pre-ping health checks
- **Schema Management**: Automatic table creation via SQLAlchemy models
- **Environment Configuration**: Database URL configured via environment variables

### Core Data Models
- **Company**: Business entity management with type categorization
- **Inventory**: Stock management with specifications and pricing
- **Activity**: Service tracking with status and technician assignment
- **Invoice/InvoiceItem**: Billing system with line items
- **StockTransaction**: Inventory movement tracking
- **FinancialRecord**: Income and expense tracking
- **CustomField**: Extensible field system for additional data

### Business Logic Components
- **Company Management**: Multi-type company support (Solar, Electrical, CCTV, etc.)
- **Inventory Control**: Stock tracking with low-stock alerts and category management
- **Activity Logging**: Service job tracking with status workflow
- **Financial Management**: Income/expense categorization and reporting
- **Invoice Generation**: PDF invoice creation with line-item details

### Security Architecture
- **Session Security**: Flask secret key for session encryption
- **Environment Variables**: Sensitive configuration stored in environment
- **Database Security**: Parameterized queries via SQLAlchemy ORM

## External Dependencies

### Core Framework Dependencies
- **Flask**: Web application framework
- **SQLAlchemy/Flask-SQLAlchemy**: Database ORM and Flask integration
- **ReportLab**: PDF generation for invoices and reports

### Frontend Dependencies
- **Bootstrap 5.1.3**: CSS framework (CDN)
- **Font Awesome 6.0.0**: Icon library (CDN)

### Database Dependencies
- **Database Backend**: Configurable via DATABASE_URL environment variable
- **Connection Pooling**: Built-in SQLAlchemy connection management

### Deployment Dependencies
- **Environment Configuration**: 
  - `FLASK_SECRET_KEY`: Session encryption key
  - `DATABASE_URL`: Database connection string

### Business Logic Enumerations
- **CompanyType**: Solar, Electrical, Borehole, CCTV, Geyser, Alarm categories
- **ActivityType**: Installation, Maintenance, Repair, Consultation, Inspection, Training
- **Status Management**: Scheduled/In Progress/Completed/Cancelled workflows
- **Financial Categories**: Income/Expense classification system